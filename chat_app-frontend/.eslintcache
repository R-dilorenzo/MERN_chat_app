[{"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\index.js":"1","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\App.js":"2","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\serviceWorker.js":"3","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\app\\store.js":"4","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\AlertTemplate.js":"5","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\Registrazione.js":"6","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\Home.js":"7","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\ChatPage.js":"8","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\Login.js":"9","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\AlertMaterial.js":"10","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\features\\userSlice.js":"11","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\features\\chatSlice.js":"12","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\img\\HomeLogo.js":"13","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\axios.js":"14","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\InputAuth.js":"15","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Nav.js":"16","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Chat.js":"17","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\DialogNotifica.js":"18","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\DialogUpload.js":"19","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Sidebar.js":"20","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Style\\HomeButton.js":"21","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Style\\NavButton.js":"22","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Message.js":"23","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Dropdown.js":"24","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Style\\styles.js":"25","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\CropImage.js":"26","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\SidebarChat.js":"27","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\canvasUtils.js":"28"},{"size":858,"mtime":1610100721560,"results":"29","hashOfConfig":"30"},{"size":850,"mtime":1610100702313,"results":"31","hashOfConfig":"30"},{"size":5141,"mtime":499162500000,"results":"32","hashOfConfig":"30"},{"size":260,"mtime":1610099098683,"results":"33","hashOfConfig":"30"},{"size":1107,"mtime":1611138574118,"results":"34","hashOfConfig":"30"},{"size":3028,"mtime":1610100509521,"results":"35","hashOfConfig":"30"},{"size":2771,"mtime":1611139178022,"results":"36","hashOfConfig":"30"},{"size":1406,"mtime":1610100293263,"results":"37","hashOfConfig":"30"},{"size":3237,"mtime":1610100440093,"results":"38","hashOfConfig":"30"},{"size":1252,"mtime":1610099141903,"results":"39","hashOfConfig":"30"},{"size":794,"mtime":1610100550193,"results":"40","hashOfConfig":"30"},{"size":546,"mtime":1610100535741,"results":"41","hashOfConfig":"30"},{"size":37276,"mtime":1609953548843,"results":"42","hashOfConfig":"30"},{"size":190,"mtime":1608909625607,"results":"43","hashOfConfig":"30"},{"size":2464,"mtime":1611138709909,"results":"44","hashOfConfig":"30"},{"size":3133,"mtime":1610100025997,"results":"45","hashOfConfig":"30"},{"size":4046,"mtime":1611138629652,"results":"46","hashOfConfig":"30"},{"size":1943,"mtime":1610099736841,"results":"47","hashOfConfig":"30"},{"size":2092,"mtime":1610099784151,"results":"48","hashOfConfig":"30"},{"size":3878,"mtime":1611138804407,"results":"49","hashOfConfig":"30"},{"size":549,"mtime":1611139235290,"results":"50","hashOfConfig":"30"},{"size":416,"mtime":1611139247802,"results":"51","hashOfConfig":"30"},{"size":883,"mtime":1610099989389,"results":"52","hashOfConfig":"30"},{"size":2744,"mtime":1610099839598,"results":"53","hashOfConfig":"30"},{"size":947,"mtime":1610100687741,"results":"54","hashOfConfig":"30"},{"size":5929,"mtime":1611138652293,"results":"55","hashOfConfig":"30"},{"size":2938,"mtime":1611138844906,"results":"56","hashOfConfig":"30"},{"size":3041,"mtime":1610099432385,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"5menbn",{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"60"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"60"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"60"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78","usedDeprecatedRules":"60"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"60"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"60"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"60"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"60"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"60"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"60"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"60"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"60"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"60"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\index.js",[],["128","129"],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\App.js",["130"],"import React from \"react\";\r\nimport \"./App.css\";\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport Home from \"./ComponentPage/Home\";\r\nimport Registrazione from \"./ComponentPage/Registrazione\";\r\nimport Login from \"./ComponentPage/Login\";\r\nimport ChatPage from \"./ComponentPage/ChatPage\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"app\">\r\n      <Router>\r\n        <Switch>\r\n          <Route path=\"/chat\">\r\n            <ChatPage></ChatPage>\r\n          </Route>\r\n          <Route path=\"/login\">\r\n            <Login></Login>\r\n          </Route>\r\n          <Route path=\"/registrazione\">\r\n            <Registrazione></Registrazione>\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <Home></Home>\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\serviceWorker.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\app\\store.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\AlertTemplate.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\Registrazione.js",["131","132","133","134"],"import React, { useState } from \"react\";\r\nimport \"./Registrazione.css\";\r\nimport axios from \"../axios\";\r\nimport Wave from \"../img/Wave.svg\";\r\nimport Bg from \"../img/profile.svg\";\r\nimport Avatar from \"../img/avatar.svg\";\r\nimport InputAuth from \"../Component/InputAuth\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport MailIcon from \"@material-ui/icons/Mail\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useAlert } from \"react-alert\";\r\nimport Nav from \"../Component/Nav\";\r\n\r\nfunction Autenticazione() {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  let history = useHistory();\r\n  const alert = useAlert();\r\n\r\n  const sendRegistazione = (e) => {\r\n    //e.preventDefault();\r\n\r\n    axios\r\n      .post(`/api/user/register`, {\r\n        name: name,\r\n        email: email,\r\n        password: password,\r\n      })\r\n      .then((res) => {\r\n        history.push(\"/login\");\r\n        alert.success(\"Registrazione effettuata!\\nEsegui il login\"); // => useAlert().success definito sopra\r\n\r\n        setName(\"\");\r\n        setEmail(\"\");\r\n        setPassword(\"\");\r\n      })\r\n      .catch((err) => {\r\n        history.push(\"/login\");\r\n        alert.error(\"Email già presente!\"); // => useAlert().error definito sopra\r\n      });\r\n  };\r\n\r\n  const regexEmail = new RegExp(\r\n    /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\r\n  );\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    if (name.length < 3 || password.length < 6 || !regexEmail.test(email)) {\r\n      return;\r\n    } else {\r\n      sendRegistazione();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <Nav></Nav>\r\n      <img className=\"wave\" src={Wave} />\r\n      <div className=\"container\">\r\n        <div className=\"img\">\r\n          <img src={Bg} alt=\"background_img\" />\r\n        </div>\r\n        <div className=\"login-content\">\r\n          <form onSubmit={submit}>\r\n            <img src={Avatar} />\r\n            <h2 className=\"title\" style={{ marginBottom: \"25px\" }}>\r\n              Registrazione\r\n            </h2>\r\n            <InputAuth\r\n              value={\"Nome\"}\r\n              stateProps={name}\r\n              setStateProps={setName}\r\n              icon={<PersonIcon />}\r\n            ></InputAuth>\r\n            <InputAuth\r\n              value={\"Email\"}\r\n              stateProps={email}\r\n              setStateProps={setEmail}\r\n              icon={<MailIcon />}\r\n            ></InputAuth>\r\n            <InputAuth\r\n              value={\"Password\"}\r\n              stateProps={password}\r\n              setStateProps={setPassword}\r\n              password\r\n              icon={<LockIcon />}\r\n            ></InputAuth>\r\n            <Link to=\"/login\">\r\n              <span className=\"link\">Hai già un account?</span>\r\n            </Link>\r\n            <button className=\"btn\">REGISTRATI</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Autenticazione;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\Home.js",["135","136","137","138"],"import React, { useEffect, useRef } from \"react\";\r\nimport \"./Home.css\";\r\nimport HomeLogo from \"../img/HomeLogo.js\";\r\nimport styled from \"styled-components\";\r\nimport HomeButton from \"../Style/HomeButton\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Nav from \"../Component/Nav\";\r\nimport { TweenMax, Power3, TimelineLite } from \"gsap\";\r\nimport { duration } from \"@material-ui/core\";\r\n\r\nfunction Home() {\r\n  let logoItem = useRef(null);\r\n  let home = useRef(null);\r\n\r\n  //creo una nuova TimeLine\r\n  let tl = new TimelineLite({ delay: 0.5 });\r\n\r\n  useEffect(() => {\r\n    //GSAP VAR\r\n    const logo = document.getElementById(\"Logo\");\r\n    const message = document.getElementById(\"MessButton\");\r\n    const line1 = document.getElementById(\"Line1\");\r\n    const line2 = document.getElementById(\"Line2\");\r\n    const bullet1 = document.getElementById(\"bullet1\");\r\n    const bullet2 = document.getElementById(\"bullet2\");\r\n    const bullet3 = document.getElementById(\"bullet3\");\r\n\r\n    //setto prima la sezione home to hidden e tramite gsap rendo visibile la sezione\r\n    //facendo partire le animazioni e visualizzare gli elementi solo quando sono tutti caricati\r\n    TweenMax.to(home, 0, { css: { visibility: \"visible\" } });\r\n\r\n    //sincronizzo le timeline con 'Start' in modo che partano allo stesso momento\r\n    tl.from(line1.children, { scaleX: 0, duration: 1 }, \"Start\")\r\n      .from(line2.children, { scaleX: 0, duration: 1.5 })\r\n      .to(message, {\r\n        scale: 1.2,\r\n        transformOrigin: \"center\",\r\n        ease: Power3.easeInOut,\r\n        duration: 0.5,\r\n      })\r\n      .to(message, { scale: 1, ease: Power3.easeInOut, duration: 0.2 })\r\n      //repeat con yoyo => yoyo true esegue animazione al reverse (torna allo stato iniaiziale)\r\n      .to(logo, {\r\n        scale: 1.2,\r\n        transformOrigin: \"center\",\r\n        ease: Power3.easeInOut,\r\n        repeat: 3,\r\n        yoyo: true,\r\n        duration: 0.5,\r\n        delay: 0.4,\r\n      });\r\n\r\n    tl.staggerFrom(\r\n      [bullet1, bullet2, bullet3],\r\n      0.3,\r\n      {\r\n        opacity: 0,\r\n        delay: 0.2,\r\n        repeat: 4,\r\n        yoyo: true,\r\n      },\r\n      0.15,\r\n      \"Start\"\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      className=\"home\"\r\n      ref={(el) => {\r\n        home = el;\r\n      }}\r\n      style={{ visibility: \"hidden\" }}\r\n    >\r\n      <Nav></Nav>\r\n      <div\r\n        className=\"home__logo\"\r\n        ref={(el) => {\r\n          logoItem = el;\r\n        }}\r\n      >\r\n        <HomeLogo></HomeLogo>\r\n      </div>\r\n      <Link className=\"home__link\" to=\"/login\">\r\n        <HomeButton login>Accedi</HomeButton>\r\n      </Link>\r\n      <Link className=\"home__link\" to=\"/registrazione\">\r\n        <HomeButton>Registrati</HomeButton>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\ChatPage.js",["139","140","141","142","143","144"],"import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Route, useHistory } from \"react-router-dom\";\r\nimport axios from \"../axios\";\r\nimport Chat from \"../Component/Chat\";\r\nimport DialogNotifica from \"../Component/DialogNotifica\";\r\nimport DialogUpload from \"../Component/DialogUpload\";\r\nimport Sidebar from \"../Component/Sidebar\";\r\nimport {\r\n  LOGIN_USER,\r\n  LOGOUT_USER,\r\n  selectDialog,\r\n  selectUser,\r\n} from \"../features/userSlice\";\r\nimport \"./ChatPage.css\";\r\nimport Login from \"./Login\";\r\n\r\nfunction ChatPage() {\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const openDialogUpload = useSelector(selectDialog);\r\n  const [dialog, setDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      if (user.photo == \"\") {\r\n        setDialog(true);\r\n      }\r\n    } else {\r\n      dispatch(LOGOUT_USER());\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"chatPage\">\r\n      {dialog ? (\r\n        <DialogNotifica open={dialog} setOpen={setDialog}></DialogNotifica>\r\n      ) : (\r\n        <></>\r\n      )}\r\n      {openDialogUpload ? <DialogUpload></DialogUpload> : <></>}\r\n      {user ? (\r\n        <>\r\n          <Sidebar></Sidebar>\r\n          <Chat></Chat>\r\n        </>\r\n      ) : (\r\n        history.push(\"/\")\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatPage;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\ComponentPage\\Login.js",["145","146","147","148"],"import React, { useState } from \"react\";\r\nimport \"./Registrazione.css\";\r\nimport axios from \"../axios\";\r\nimport Wave from \"../img/Wave.svg\";\r\nimport Bg from \"../img/bg.svg\";\r\nimport Avatar from \"../img/avatar.svg\";\r\nimport InputAuth from \"../Component/InputAuth\";\r\nimport MailIcon from \"@material-ui/icons/Mail\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { LOGIN_USER } from \"../features/userSlice\";\r\nimport { useAlert } from \"react-alert\";\r\nimport Nav from \"../Component/Nav\";\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  let history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const alert = useAlert();\r\n\r\n  const sendLogin = (e) => {\r\n    //e.preventDefault();\r\n\r\n    axios\r\n      .post(`/api/user/login`, {\r\n        email: email,\r\n        password: password,\r\n      })\r\n      .then(async (res) => {\r\n        // ottenuto il token con la post\r\n        let axiosConfig = {\r\n          headers: {\r\n            \"auth-token\": `${res.data}`,\r\n          },\r\n        };\r\n        // effettuo una get con header per ottenere utente\r\n        await axios.get(`/api/chat/`, axiosConfig).then((res) => {\r\n          dispatch(\r\n            LOGIN_USER({\r\n              displayName: res.data.name,\r\n              email: res.data.email,\r\n              uid: res.data._id,\r\n              photo: res.data.photo,\r\n            })\r\n          );\r\n\r\n          history.push(\"/chat\");\r\n          setEmail(\"\");\r\n          setPassword(\"\");\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        history.push(\"/login\");\r\n        alert.error(\"Email/Password non corretti!\"); // => useAlert().error definito sopra\r\n      });\r\n  };\r\n\r\n  const regexEmail = new RegExp(\r\n    /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\r\n  );\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    if (password.length < 6 || !regexEmail.test(email)) {\r\n      return;\r\n    } else {\r\n      sendLogin();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <Nav></Nav>\r\n      <img className=\"wave\" src={Wave} />\r\n      <div className=\"container\">\r\n        <div className=\"img\">\r\n          <img src={Bg} alt=\"background_img\" />\r\n        </div>\r\n        <div className=\"login-content\">\r\n          <form onSubmit={submit}>\r\n            <img src={Avatar} />\r\n            <h2 className=\"title\" style={{ marginBottom: \"25px\" }}>\r\n              LOGIN\r\n            </h2>\r\n            <InputAuth\r\n              value={\"Email\"}\r\n              stateProps={email}\r\n              setStateProps={setEmail}\r\n              icon={<MailIcon />}\r\n            ></InputAuth>\r\n            <InputAuth\r\n              value={\"Password\"}\r\n              stateProps={password}\r\n              setStateProps={setPassword}\r\n              password\r\n              icon={<LockIcon />}\r\n            ></InputAuth>\r\n            <Link to=\"/registrazione\">\r\n              <span className=\"link\">Non hai un account?</span>\r\n            </Link>\r\n            <button className=\"btn\">ACCEDI</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\AlertMaterial.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\features\\userSlice.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\features\\chatSlice.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\img\\HomeLogo.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\axios.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\InputAuth.js",["149","150","151","152","153","154"],"import React, { useRef, useState } from \"react\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\r\n\r\nfunction InputAuth({ value, stateProps, setStateProps, password, icon }) {\r\n  const [inputError, setInputError] = useState(\"\");\r\n  const [hidePsw, setHidePsw] = useState(true);\r\n\r\n  const divRef = useRef();\r\n  const regexEmail = new RegExp(\r\n    /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\r\n  );\r\n\r\n  const addFocus = () => {\r\n    divRef.current.classList.add(\"focus\");\r\n  };\r\n\r\n  const loseFocus = () => {\r\n    if (value == \"Nome\") {\r\n      if (stateProps?.length < 3) {\r\n        setInputError(`ERRORE: ${value} deve essere almeno di 3 caratteri`);\r\n      } else {\r\n        setInputError(\"\");\r\n      }\r\n    }\r\n    if (value == \"Password\") {\r\n      if (stateProps?.length < 6) {\r\n        setInputError(`ERRORE: ${value} deve essere almeno di 6 caratteri`);\r\n      } else {\r\n        setInputError(\"\");\r\n      }\r\n    }\r\n    if (value == \"Email\") {\r\n      if (stateProps?.length < 6 || !regexEmail.test(stateProps)) {\r\n        setInputError(`ERRORE: Formato ${value} non corretto`);\r\n      } else {\r\n        setInputError(\"\");\r\n      }\r\n    }\r\n    if (stateProps == \"\") {\r\n      divRef.current.classList.remove(\"focus\");\r\n      setInputError(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"input-div one\" ref={divRef}>\r\n      <div className=\"i\">{icon}</div>\r\n      <div className=\"div\">\r\n        <h5>\r\n          {value}{\" \"}\r\n          <span className=\"error\">\r\n            {\" \"}\r\n            {!inputError ? \"\" : `- ${inputError}`}{\" \"}\r\n          </span>{\" \"}\r\n        </h5>\r\n        <input\r\n          onChange={(e) => setStateProps(e.target.value)}\r\n          type={password ? (hidePsw ? \"password\" : \"text\") : \"text\"}\r\n          onFocus={addFocus}\r\n          onBlur={loseFocus}\r\n          id=\"inputText\"\r\n        />\r\n      </div>\r\n      {password ? (\r\n        <span\r\n          style={\r\n            stateProps.length > 0 ? { display: \"flex\" } : { display: \"none\" }\r\n          }\r\n          className=\"i\"\r\n          id=\"hidePsw\"\r\n          onClick={() => {\r\n            setHidePsw(!hidePsw);\r\n          }}\r\n        >\r\n          {hidePsw ? (\r\n            <VisibilityOffIcon></VisibilityOffIcon>\r\n          ) : (\r\n            <VisibilityIcon></VisibilityIcon>\r\n          )}\r\n        </span>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InputAuth;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Nav.js",["155","156","157","158"],"import React from \"react\";\r\nimport \"../Style/Nav.css\";\r\nimport logo from \"../img/logo.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ThemeProvider, withStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport HowToRegIcon from \"@material-ui/icons/HowToReg\";\r\nimport LockOpenIcon from \"@material-ui/icons/LockOpen\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport styled from \"styled-components\";\r\nimport NavButton from \"../Style/NavButton\";\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: \"1px solid #d3d4d5\",\r\n  },\r\n})((props) => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"center\",\r\n    }}\r\n    transformOrigin={{\r\n      vertical: \"top\",\r\n      horizontal: \"center\",\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuItem = withStyles((theme) => ({\r\n  root: {\r\n    \"&:hover\": {\r\n      backgroundColor: \"#284b6e\",\r\n      \"& .MuiListItemIcon-root, & .MuiListItemText-primary\": {\r\n        color: theme.palette.common.white,\r\n      },\r\n    },\r\n  },\r\n}))(MenuItem);\r\n\r\nfunction Nav() {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"nav\">\r\n      <Link className=\"nav__link\" to=\"/\">\r\n        <img className=\"nav__logo\" src={logo} alt=\"Square Chat\"></img>\r\n      </Link>\r\n      <div className=\"nav__hamburger\">\r\n        <NavButton onClick={handleClick}>\r\n          <MenuIcon></MenuIcon>\r\n        </NavButton>\r\n        <StyledMenu\r\n          id=\"customized-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <StyledMenuItem>\r\n            <Link className=\"nav__link\" to=\"/\">\r\n              <ListItemIcon>\r\n                <HomeIcon fontSize=\"small\" />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Home\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n          <StyledMenuItem>\r\n            <Link className=\"nav__link\" to=\"/login\">\r\n              <ListItemIcon>\r\n                <LockOpenIcon fontSize=\"small\" />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Login\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n          <StyledMenuItem>\r\n            <Link className=\"nav__link\" to=\"/registrazione\">\r\n              <ListItemIcon>\r\n                <HowToRegIcon fontSize=\"small\" />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Registrazione\" />\r\n            </Link>\r\n          </StyledMenuItem>\r\n        </StyledMenu>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Nav;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Chat.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\DialogNotifica.js",["159"],"import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Avatar from \"../img/avatar.svg\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { SET_UPLOAD_TRUE } from \"../features/userSlice\";\r\nimport NavButton from \"../Style/NavButton\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction DialogNotifica({ open, setOpen }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const UpdateFoto = () => {\r\n    handleClose();\r\n\r\n    dispatch(SET_UPLOAD_TRUE());\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      aria-labelledby=\"alert-dialog-slide-title\"\r\n      aria-describedby=\"alert-dialog-slide-description\"\r\n    >\r\n      <DialogTitle\r\n        id=\"alert-dialog-slide-title\"\r\n        style={{ display: \"flex\", justifyContent: \"center\" }}\r\n      >\r\n        <img style={{ maxWidth: \"10vw\", maxHeight: \"15vh\" }} src={Avatar}></img>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-slide-description\">\r\n          <strong>Non hai ancora inserito una foto per il profilo.</strong>\r\n          <p>Aggiorna ora?</p>\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose}>Non ora</Button>\r\n        <NavButton onClick={UpdateFoto}>Aggiorna Ora</NavButton>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default DialogNotifica;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\DialogUpload.js",["160","161","162","163"],"import React, { useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CropImage from \"./CropImage\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport { styles } from \"../Style/styles\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectDialog, SET_UPLOAD_FALSE } from \"../features/userSlice\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst StyledDialogUpload = withStyles(styles)(CropImage);\r\n\r\nfunction DialogUpload() {\r\n  const [imageSrc, setImageSrc] = useState(null);\r\n  const [maxWidth, setMaxWidth] = useState(\"xl\");\r\n  const [fullWidth, setFullWidth] = useState(true);\r\n  const opendDialogUpload = useSelector(selectDialog);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleClose = () => {\r\n    dispatch(SET_UPLOAD_FALSE());\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullWidth={fullWidth}\r\n      maxWidth={maxWidth}\r\n      open={opendDialogUpload}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      aria-labelledby=\"alert-dialog-slide-title\"\r\n      aria-describedby=\"alert-dialog-slide-description\"\r\n    >\r\n      <DialogContent>\r\n        <StyledDialogUpload\r\n          imageSrc={imageSrc}\r\n          setImageSrc={setImageSrc}\r\n        ></StyledDialogUpload>\r\n      </DialogContent>\r\n      {imageSrc ? (\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              setImageSrc(null);\r\n            }}\r\n            color=\"primary\"\r\n          >\r\n            Rimuovi Immagine\r\n          </Button>\r\n        </DialogActions>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default DialogUpload;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Sidebar.js",["164","165","166"],"import React, { useEffect, useState } from \"react\";\r\nimport \"../Style/Sidebar.css\";\r\nimport { Avatar, Button, IconButton } from \"@material-ui/core\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport RateReviewOutLinedIcon from \"@material-ui/icons/RateReviewOutlined\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport { selectUser } from \"../features/userSlice\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"../axios\";\r\nimport Pusher from \"pusher-js\";\r\n\r\nconst pusher = new Pusher(process.env.REACT_APP_PUSHER_CLIENT_ID, {\r\n  cluster: \"eu\",\r\n});\r\n\r\n/**\r\n * User:\r\n *  photo\r\n *  id\r\n *  email\r\n *  name\r\n */\r\n\r\nfunction Sidebar() {\r\n  const user = useSelector(selectUser);\r\n  const [chats, setChats] = useState([]);\r\n  const [filterName, setFilterName] = useState(\"\");\r\n\r\n  const getChats = async () => {\r\n    await axios\r\n      .get(\"/api/chat/get/conversationList\")\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setChats(res.data);\r\n\r\n        for (var property in chats) {\r\n          console.log(`${property} = ${chats[property]}`);\r\n        }\r\n        console.log(chats);\r\n        console.log(`chat => ${chats}`);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`LOG ERROR => ${err}`);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    //recupera dal db le chat\r\n    getChats();\r\n\r\n    const channel = pusher.subscribe(\"chats\");\r\n    channel.bind(\"newChat\", function (data) {\r\n      getChats();\r\n    });\r\n  }, []);\r\n\r\n  const addChat = (e) => {\r\n    e.preventDefault();\r\n\r\n    const chatName = prompt(\"Inserisci il nome della chat\");\r\n    const firstMsg = prompt(\"Inserisci un messaggio di benvenuto...\");\r\n\r\n    const sendUser = {\r\n      displayName: user.displayName,\r\n      email: user.email,\r\n      photo: user.photo,\r\n      uid: user.uid,\r\n    };\r\n\r\n    if (chatName && firstMsg) {\r\n      let chatId = \"\";\r\n\r\n      axios\r\n        .post(\"/api/chat/new/conversation\", {\r\n          chatName: chatName,\r\n        })\r\n        .then((res) => {\r\n          chatId = res.data._id;\r\n        })\r\n        .then(() => {\r\n          axios.post(`/api/chat/new/message?id=${chatId}`, {\r\n            message: firstMsg,\r\n            timestamp: Date.now(),\r\n            user: sendUser,\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <Avatar src={user.photo} className=\"sidebar__avatar\" />\r\n        <div className=\"sidebar__input\">\r\n          <SearchIcon />\r\n          <input\r\n            placeholder=\"Cerca una chat\"\r\n            onChange={(e) => {\r\n              setFilterName(e.target.value);\r\n            }}\r\n          ></input>\r\n        </div>\r\n        <Button onClick={addChat} endIcon={<RateReviewOutLinedIcon />}>\r\n          <b>Nuova chat</b>\r\n        </Button>\r\n      </div>\r\n      <div className=\"sidebar__chats\">\r\n        {filterName.length != \"\"\r\n          ? chats\r\n              .filter(\r\n                (item) =>\r\n                  JSON.stringify(item.name)\r\n                    .toLowerCase()\r\n                    .indexOf(filterName.toLowerCase()) !== -1\r\n              )\r\n              .map(({ id, name, timestamp }) => (\r\n                <SidebarChat\r\n                  key={id}\r\n                  id={id}\r\n                  chatName={name}\r\n                  timestamp={timestamp}\r\n                ></SidebarChat>\r\n              ))\r\n          : chats.map(({ id, name, timestamp }) => (\r\n              <SidebarChat\r\n                key={id}\r\n                id={id}\r\n                chatName={name}\r\n                timestamp={timestamp}\r\n              ></SidebarChat>\r\n            ))}\r\n        {/* {chats.map(({ id, name, timestamp }) =>(\r\n                    <SidebarChat key={id} id={id} chatName={name} timestamp={timestamp}></SidebarChat>\r\n                ))} */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Style\\HomeButton.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Style\\NavButton.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Message.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\Dropdown.js",["167","168","169","170","171"],"import React from \"react\";\r\nimport \"../Style/Nav.css\";\r\nimport logo from \"../img/logo.png\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\r\nimport LockOpenIcon from \"@material-ui/icons/LockOpen\";\r\nimport BackupIcon from \"@material-ui/icons/Backup\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport NavButton from \"../Style/NavButton\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { LOGOUT_USER, SET_UPLOAD_TRUE } from \"../features/userSlice\";\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: \"1px solid #d3d4d5\",\r\n  },\r\n})((props) => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"center\",\r\n    }}\r\n    transformOrigin={{\r\n      vertical: \"top\",\r\n      horizontal: \"center\",\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuItem = withStyles((theme) => ({\r\n  root: {\r\n    \"&:hover\": {\r\n      backgroundColor: \"#284b6e\",\r\n      \"& .MuiListItemIcon-root, & .MuiListItemText-primary\": {\r\n        color: theme.palette.common.white,\r\n      },\r\n    },\r\n  },\r\n}))(MenuItem);\r\n\r\nfunction Dropdown() {\r\n  const dispatch = useDispatch();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const history = useHistory();\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const OpenUpload = () => {\r\n    dispatch(SET_UPLOAD_TRUE());\r\n  };\r\n\r\n  return (\r\n    <div className=\"nav__hamburger\">\r\n      <Button onClick={handleClick}>\r\n        <SettingsIcon></SettingsIcon>\r\n      </Button>\r\n\r\n      <StyledMenu\r\n        id=\"customized-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <StyledMenuItem onClick={OpenUpload}>\r\n          <ListItemIcon>\r\n            <BackupIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Upload Avatar\" />\r\n        </StyledMenuItem>\r\n        <StyledMenuItem\r\n          onClick={() => {\r\n            dispatch(LOGOUT_USER());\r\n          }}\r\n        >\r\n          <ListItemIcon>\r\n            <ExitToAppIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Logot\" />\r\n        </StyledMenuItem>\r\n      </StyledMenu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dropdown;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Style\\styles.js",[],"C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\CropImage.js",["172","173","174","175","176","177","178","179"],"import React, { useState, useCallback } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Cropper from \"react-easy-crop\";\r\nimport { Slider } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n// import ImgDialog from './ImgDialog'\r\nimport { getCroppedImg, getRotatedImage } from \"./canvasUtils\";\r\nimport { styles } from \"../Style/styles\";\r\nimport NavButton from \"../Style/NavButton\";\r\nimport axios from \"../axios\";\r\nimport {\r\n  LOGIN_USER,\r\n  selectUser,\r\n  SET_UPLOAD_FALSE,\r\n} from \"../features/userSlice\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst ORIENTATION_TO_ANGLE = {\r\n  3: 180,\r\n  6: 90,\r\n  8: -90,\r\n};\r\n\r\nfunction CropImage({ imageSrc, setImageSrc, classes }) {\r\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\r\n  const [rotation, setRotation] = useState(0);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);\r\n  const [croppedImage, setCroppedImage] = useState(null);\r\n  const user = useSelector(selectUser);\r\n  const [file, setFile] = useState(null);\r\n  const dispatch = useDispatch();\r\n\r\n  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\r\n    setCroppedAreaPixels(croppedAreaPixels);\r\n  }, []);\r\n\r\n  const showCroppedImage = useCallback(async () => {\r\n    try {\r\n      const croppedImage = await getCroppedImg(\r\n        imageSrc,\r\n        croppedAreaPixels,\r\n        rotation\r\n      );\r\n      setCroppedImage(croppedImage);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }, [imageSrc, croppedAreaPixels, rotation]);\r\n\r\n  const onClose = useCallback(() => {\r\n    setCroppedImage(null);\r\n  }, []);\r\n\r\n  function readFile(file) {\r\n    return new Promise((resolve) => {\r\n      const reader = new FileReader();\r\n      reader.addEventListener(\"load\", () => resolve(reader.result), false);\r\n      reader.readAsDataURL(file);\r\n    });\r\n  }\r\n\r\n  const onFileChange = async (e) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      const file = e.target.files[0];\r\n      let imageDataUrl = await readFile(file);\r\n\r\n      setImageSrc(imageDataUrl);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const url = `${croppedImage}`;\r\n    fetch(url)\r\n      .then((res) => res.blob())\r\n      .then((res) => {\r\n        const file = new File([res], \"myImage.jpeg\", { type: \"image/jpeg\" });\r\n        console.log(file);\r\n        setFile(file);\r\n        // FORMDATA:\r\n        // First argument is a field\r\n        // Second argument  can take Buffer or Stream (lazily read during the request) too.\r\n        // Third argument is filename\r\n        const formData = new FormData();\r\n        formData.append(\"_id\", user.uid); //passo uid in req.body\r\n        formData.append(\"myImage\", file); //passo il file in req.file\r\n        console.log(formData);\r\n        const config = {\r\n          headers: {\r\n            \"content-type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n        axios\r\n          .post(\"/api/user/upload\", formData, config)\r\n          .then((response) => {\r\n            // console.log(`RESPONSE --> ${response}`)\r\n            const pathToUpload = \"/public/uploads/\";\r\n            const path = `${pathToUpload}${response.data}`;\r\n            axios.post(`/api/chat/setPhoto/conversation?uid=${user.uid}`, {\r\n              photo: path,\r\n            });\r\n            axios.post(`/api/user/setPhoto/user?_id=${user.uid}`, {\r\n              photo: path,\r\n            });\r\n\r\n            dispatch(\r\n              LOGIN_USER({\r\n                displayName: user.displayName,\r\n                email: user.email,\r\n                uid: user.uid,\r\n                photo: path,\r\n              })\r\n            );\r\n          })\r\n          .catch((error) => {\r\n            console.log(`ERROR --> ${error}`);\r\n          });\r\n      });\r\n    setImageSrc(null);\r\n    dispatch(SET_UPLOAD_FALSE());\r\n    setFile(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {imageSrc ? (\r\n        <React.Fragment>\r\n          <div className={classes.cropContainer}>\r\n            <Cropper\r\n              image={imageSrc}\r\n              crop={crop}\r\n              rotation={rotation}\r\n              zoom={zoom}\r\n              cropShape=\"round\"\r\n              aspect={1}\r\n              onCropChange={setCrop}\r\n              onRotationChange={setRotation}\r\n              onCropComplete={onCropComplete}\r\n              onZoomChange={setZoom}\r\n            />\r\n          </div>\r\n          <div className={classes.controls}>\r\n            <div className={classes.sliderContainer}>\r\n              <Typography\r\n                variant=\"overline\"\r\n                classes={{ root: classes.sliderLabel }}\r\n              >\r\n                Zoom\r\n              </Typography>\r\n              <Slider\r\n                value={zoom}\r\n                min={1}\r\n                max={3}\r\n                step={0.1}\r\n                aria-labelledby=\"Zoom\"\r\n                classes={{ container: classes.slider }}\r\n                onChange={(e, zoom) => setZoom(zoom)}\r\n              />\r\n            </div>\r\n            <Button\r\n              onClick={showCroppedImage}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              classes={{ root: classes.cropButton }}\r\n            >\r\n              Show Result\r\n            </Button>\r\n          </div>\r\n          {croppedImage ? (\r\n            <div className=\"chat__dialogDiv\">\r\n              <h2>Crop image:</h2>\r\n              <img src={croppedImage}></img>\r\n              <NavButton onClick={handleUpload}>Upload</NavButton>\r\n            </div>\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </React.Fragment>\r\n      ) : (\r\n        <input type=\"file\" onChange={onFileChange} accept=\"image/*\" />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CropImage;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\SidebarChat.js",["180","181","182","183"],"import { Avatar } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport \"../Style/SidebarChat.css\";\r\nimport { setChat } from \"../features/chatSlice\";\r\nimport * as timeago from \"timeago.js\";\r\nimport axios from \"../axios\";\r\nimport Pusher from \"pusher-js\";\r\n\r\nconst pusher = new Pusher(process.env.REACT_APP_PUSHER_CLIENT_ID, {\r\n  cluster: \"eu\",\r\n});\r\n\r\nfunction SidebarChat({ id, chatName }) {\r\n  const dispatch = useDispatch();\r\n  const [chatInfo, setChatInfo] = useState([]);\r\n\r\n  const [lastMsg, setLastMsg] = useState(\"\");\r\n  const [lastPhoto, setLastPhoto] = useState(\"\");\r\n  const [lastTimestamp, setLastTimestamp] = useState(\"\");\r\n\r\n  const getSidebarElement = async () => {\r\n    await axios.get(`/api/chat/get/lastMessage?id=${id}`).then((res) => {\r\n      setLastMsg(res.data.message);\r\n      setLastPhoto(res.data.user.photo);\r\n      setLastTimestamp(res.data.timestamp);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getSidebarElement();\r\n\r\n    //eseguo subscribe con pusher al canale ''messages''\r\n    //ogni nuovo messaggio che si ha esegue nuovamente la funzione getSidebarElement()\r\n    const channel = pusher.subscribe(\"messages\");\r\n    channel.bind(\"newMessage\", function (data) {\r\n      getSidebarElement();\r\n    });\r\n  }, [id]);\r\n\r\n  let utc = new Date(parseInt(lastTimestamp)).toUTCString();\r\n  let data = new Date(utc);\r\n\r\n\r\n  return (\r\n    <div\r\n      onClick={() =>\r\n        dispatch(\r\n          setChat({\r\n            chatId: id,\r\n            chatName: chatName,\r\n          })\r\n        )\r\n      }\r\n      className=\"sidebarChat\"\r\n    >\r\n      <Avatar src={lastPhoto} />\r\n      <div className=\"sidebarChat__info\">\r\n        <h3>\r\n          {chatName.length > 15 ? chatName.substr(0, 14) + \"...\" : chatName}\r\n        </h3>\r\n        <p>{lastMsg.length > 45 ? lastMsg.substr(0, 44) + \"...\" : lastMsg}</p>\r\n        <small className=\"sidebarChat__data\">\r\n          <span className=\"data__xl\">\r\n            {/* {new Date(parseInt(lastTimestamp)).toUTCString()} */}\r\n            {`${data\r\n              .toLocaleDateString(\"it-IT\", { weekday: \"short\" })\r\n              .toUpperCase()} , ${data.getDate()}/${\r\n              data.getMonth() + 1\r\n            }/${data.getFullYear()} - ${data.toLocaleTimeString([], {\r\n              hour: \"2-digit\",\r\n              minute: \"2-digit\",\r\n            })}`}\r\n          </span>\r\n          {/* gg/mm/yy - hh.mm => */}\r\n          <span className=\"data__sm\">\r\n            {`${data.getDate()}/${\r\n              data.getMonth() + 1\r\n            }/${data.getFullYear()} - ${data.toLocaleTimeString([], {\r\n              hour: \"2-digit\",\r\n              minute: \"2-digit\",\r\n            })}`}\r\n          </span>\r\n          {/* {`${data.getDate()}/${data.getMonth()+1}/${data.getFullYear()} - ${data.getHours()}:${data.getMinutes()}`} */}\r\n        </small>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SidebarChat;\r\n","C:\\Users\\rober\\Desktop\\MERN_APP\\chatApp\\chat_app-frontend\\src\\Component\\canvasUtils.js",[],{"ruleId":"184","replacedBy":"185"},{"ruleId":"186","replacedBy":"187"},{"ruleId":"188","severity":1,"message":"189","line":3,"column":50,"nodeType":"190","messageId":"191","endLine":3,"endColumn":54},{"ruleId":"192","severity":1,"message":"193","line":47,"column":12,"nodeType":"194","messageId":"195","endLine":47,"endColumn":13,"suggestions":"196"},{"ruleId":"192","severity":1,"message":"193","line":47,"column":28,"nodeType":"194","messageId":"195","endLine":47,"endColumn":29,"suggestions":"197"},{"ruleId":"198","severity":1,"message":"199","line":61,"column":7,"nodeType":"200","endLine":61,"endColumn":42},{"ruleId":"198","severity":1,"message":"199","line":68,"column":13,"nodeType":"200","endLine":68,"endColumn":33},{"ruleId":"188","severity":1,"message":"201","line":4,"column":8,"nodeType":"190","messageId":"191","endLine":4,"endColumn":14},{"ruleId":"188","severity":1,"message":"202","line":9,"column":10,"nodeType":"190","messageId":"191","endLine":9,"endColumn":18},{"ruleId":"203","severity":1,"message":"204","line":65,"column":6,"nodeType":"205","endLine":65,"endColumn":8,"suggestions":"206"},{"ruleId":"188","severity":1,"message":"207","line":79,"column":11,"nodeType":"190","messageId":"191","endLine":79,"endColumn":19},{"ruleId":"188","severity":1,"message":"208","line":3,"column":10,"nodeType":"190","messageId":"191","endLine":3,"endColumn":15},{"ruleId":"188","severity":1,"message":"209","line":4,"column":8,"nodeType":"190","messageId":"191","endLine":4,"endColumn":13},{"ruleId":"188","severity":1,"message":"210","line":10,"column":3,"nodeType":"190","messageId":"191","endLine":10,"endColumn":13},{"ruleId":"188","severity":1,"message":"211","line":16,"column":8,"nodeType":"190","messageId":"191","endLine":16,"endColumn":13},{"ruleId":"212","severity":1,"message":"213","line":27,"column":22,"nodeType":"214","messageId":"215","endLine":27,"endColumn":24},{"ruleId":"203","severity":1,"message":"216","line":33,"column":6,"nodeType":"205","endLine":33,"endColumn":8,"suggestions":"217"},{"ruleId":"192","severity":1,"message":"193","line":63,"column":12,"nodeType":"194","messageId":"195","endLine":63,"endColumn":13,"suggestions":"218"},{"ruleId":"192","severity":1,"message":"193","line":63,"column":28,"nodeType":"194","messageId":"195","endLine":63,"endColumn":29,"suggestions":"219"},{"ruleId":"198","severity":1,"message":"199","line":77,"column":7,"nodeType":"200","endLine":77,"endColumn":42},{"ruleId":"198","severity":1,"message":"199","line":84,"column":13,"nodeType":"200","endLine":84,"endColumn":33},{"ruleId":"192","severity":1,"message":"193","line":11,"column":12,"nodeType":"194","messageId":"195","endLine":11,"endColumn":13,"suggestions":"220"},{"ruleId":"192","severity":1,"message":"193","line":11,"column":28,"nodeType":"194","messageId":"195","endLine":11,"endColumn":29,"suggestions":"221"},{"ruleId":"212","severity":1,"message":"213","line":19,"column":15,"nodeType":"214","messageId":"215","endLine":19,"endColumn":17},{"ruleId":"212","severity":1,"message":"213","line":26,"column":15,"nodeType":"214","messageId":"215","endLine":26,"endColumn":17},{"ruleId":"212","severity":1,"message":"213","line":33,"column":15,"nodeType":"214","messageId":"215","endLine":33,"endColumn":17},{"ruleId":"212","severity":1,"message":"213","line":40,"column":20,"nodeType":"214","messageId":"215","endLine":40,"endColumn":22},{"ruleId":"188","severity":1,"message":"222","line":5,"column":10,"nodeType":"190","messageId":"191","endLine":5,"endColumn":23},{"ruleId":"188","severity":1,"message":"223","line":6,"column":8,"nodeType":"190","messageId":"191","endLine":6,"endColumn":14},{"ruleId":"188","severity":1,"message":"224","line":15,"column":10,"nodeType":"190","messageId":"191","endLine":15,"endColumn":24},{"ruleId":"188","severity":1,"message":"201","line":16,"column":8,"nodeType":"190","messageId":"191","endLine":16,"endColumn":14},{"ruleId":"198","severity":1,"message":"199","line":44,"column":9,"nodeType":"200","endLine":44,"endColumn":75},{"ruleId":"188","severity":1,"message":"225","line":6,"column":8,"nodeType":"190","messageId":"191","endLine":6,"endColumn":25},{"ruleId":"188","severity":1,"message":"226","line":7,"column":8,"nodeType":"190","messageId":"191","endLine":7,"endColumn":19},{"ruleId":"188","severity":1,"message":"227","line":23,"column":20,"nodeType":"190","messageId":"191","endLine":23,"endColumn":31},{"ruleId":"188","severity":1,"message":"228","line":24,"column":21,"nodeType":"190","messageId":"191","endLine":24,"endColumn":33},{"ruleId":"188","severity":1,"message":"229","line":3,"column":26,"nodeType":"190","messageId":"191","endLine":3,"endColumn":36},{"ruleId":"203","severity":1,"message":"230","line":55,"column":6,"nodeType":"205","endLine":55,"endColumn":8,"suggestions":"231"},{"ruleId":"212","severity":1,"message":"232","line":108,"column":28,"nodeType":"214","messageId":"215","endLine":108,"endColumn":30},{"ruleId":"188","severity":1,"message":"233","line":3,"column":8,"nodeType":"190","messageId":"191","endLine":3,"endColumn":12},{"ruleId":"188","severity":1,"message":"189","line":4,"column":10,"nodeType":"190","messageId":"191","endLine":4,"endColumn":14},{"ruleId":"188","severity":1,"message":"234","line":12,"column":8,"nodeType":"190","messageId":"191","endLine":12,"endColumn":20},{"ruleId":"188","severity":1,"message":"235","line":15,"column":8,"nodeType":"190","messageId":"191","endLine":15,"endColumn":17},{"ruleId":"188","severity":1,"message":"236","line":53,"column":9,"nodeType":"190","messageId":"191","endLine":53,"endColumn":16},{"ruleId":"188","severity":1,"message":"237","line":2,"column":8,"nodeType":"190","messageId":"191","endLine":2,"endColumn":16},{"ruleId":"188","severity":1,"message":"238","line":7,"column":10,"nodeType":"190","messageId":"191","endLine":7,"endColumn":20},{"ruleId":"188","severity":1,"message":"239","line":9,"column":25,"nodeType":"190","messageId":"191","endLine":9,"endColumn":40},{"ruleId":"188","severity":1,"message":"240","line":10,"column":10,"nodeType":"190","messageId":"191","endLine":10,"endColumn":16},{"ruleId":"188","severity":1,"message":"241","line":21,"column":7,"nodeType":"190","messageId":"191","endLine":21,"endColumn":27},{"ruleId":"188","severity":1,"message":"242","line":34,"column":10,"nodeType":"190","messageId":"191","endLine":34,"endColumn":14},{"ruleId":"188","severity":1,"message":"243","line":54,"column":9,"nodeType":"190","messageId":"191","endLine":54,"endColumn":16},{"ruleId":"198","severity":1,"message":"199","line":177,"column":15,"nodeType":"200","endLine":177,"endColumn":39},{"ruleId":"188","severity":1,"message":"244","line":6,"column":13,"nodeType":"190","messageId":"191","endLine":6,"endColumn":20},{"ruleId":"188","severity":1,"message":"245","line":16,"column":10,"nodeType":"190","messageId":"191","endLine":16,"endColumn":18},{"ruleId":"188","severity":1,"message":"246","line":16,"column":20,"nodeType":"190","messageId":"191","endLine":16,"endColumn":31},{"ruleId":"203","severity":1,"message":"247","line":39,"column":6,"nodeType":"205","endLine":39,"endColumn":10,"suggestions":"248"},"no-native-reassign",["249"],"no-negated-in-lhs",["250"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["251","252"],["253","254"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'styled' is defined but never used.","'duration' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'tl'. Either include it or remove the dependency array.","ArrayExpression",["255"],"'logoItem' is assigned a value but never used.","'Route' is defined but never used.","'axios' is defined but never used.","'LOGIN_USER' is defined but never used.","'Login' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","React Hook useEffect has missing dependencies: 'dispatch' and 'user'. Either include them or remove the dependency array.",["256"],["257","258"],["259","260"],["261","262"],["263","264"],"'ThemeProvider' is defined but never used.","'Button' is defined but never used.","'createMuiTheme' is defined but never used.","'DialogContentText' is defined but never used.","'DialogTitle' is defined but never used.","'setMaxWidth' is assigned a value but never used.","'setFullWidth' is assigned a value but never used.","'IconButton' is defined but never used.","React Hook useEffect has a missing dependency: 'getChats'. Either include it or remove the dependency array.",["265"],"Expected '!==' and instead saw '!='.","'logo' is defined but never used.","'LockOpenIcon' is defined but never used.","'NavButton' is defined but never used.","'history' is assigned a value but never used.","'ReactDOM' is defined but never used.","'withStyles' is defined but never used.","'getRotatedImage' is defined but never used.","'styles' is defined but never used.","'ORIENTATION_TO_ANGLE' is assigned a value but never used.","'file' is assigned a value but never used.","'onClose' is assigned a value but never used.","'timeago' is defined but never used.","'chatInfo' is assigned a value but never used.","'setChatInfo' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'getSidebarElement'. Either include it or remove the dependency array.",["266"],"no-global-assign","no-unsafe-negation",{"messageId":"267","fix":"268","desc":"269"},{"messageId":"270","fix":"271","desc":"272"},{"messageId":"267","fix":"273","desc":"269"},{"messageId":"270","fix":"274","desc":"272"},{"desc":"275","fix":"276"},{"desc":"277","fix":"278"},{"messageId":"267","fix":"279","desc":"269"},{"messageId":"270","fix":"280","desc":"272"},{"messageId":"267","fix":"281","desc":"269"},{"messageId":"270","fix":"282","desc":"272"},{"messageId":"267","fix":"283","desc":"269"},{"messageId":"270","fix":"284","desc":"272"},{"messageId":"267","fix":"285","desc":"269"},{"messageId":"270","fix":"286","desc":"272"},{"desc":"287","fix":"288"},{"desc":"289","fix":"290"},"removeEscape",{"range":"291","text":"292"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"293","text":"294"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"295","text":"292"},{"range":"296","text":"294"},"Update the dependencies array to be: [tl]",{"range":"297","text":"298"},"Update the dependencies array to be: [dispatch, user]",{"range":"299","text":"300"},{"range":"301","text":"292"},{"range":"302","text":"294"},{"range":"303","text":"292"},{"range":"304","text":"294"},{"range":"305","text":"292"},{"range":"306","text":"294"},{"range":"307","text":"292"},{"range":"308","text":"294"},"Update the dependencies array to be: [getChats]",{"range":"309","text":"310"},"Update the dependencies array to be: [getSidebarElement, id]",{"range":"311","text":"312"},[1432,1433],"",[1432,1432],"\\",[1448,1449],[1448,1448],[2166,2168],"[tl]",[957,959],"[dispatch, user]",[1872,1873],[1872,1872],[1888,1889],[1888,1888],[433,434],[433,433],[449,450],[449,449],[1465,1467],"[getChats]",[1312,1316],"[getSidebarElement, id]"]